


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > XmpPdfExporter</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.jabref.logic.exporter</a>
</div>

<h1>Coverage Summary for Class: XmpPdfExporter (org.jabref.logic.exporter)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">XmpPdfExporter</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/20)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.jabref.logic.exporter;
&nbsp;
&nbsp;import java.io.IOException;
&nbsp;import java.nio.file.Files;
&nbsp;import java.nio.file.Path;
&nbsp;import java.util.List;
&nbsp;import java.util.Objects;
&nbsp;
&nbsp;import javax.xml.transform.TransformerException;
&nbsp;
&nbsp;import org.jabref.logic.l10n.Localization;
&nbsp;import org.jabref.logic.util.StandardFileType;
&nbsp;import org.jabref.logic.xmp.XmpPreferences;
&nbsp;import org.jabref.logic.xmp.XmpUtilWriter;
&nbsp;import org.jabref.model.database.BibDatabaseContext;
&nbsp;import org.jabref.model.entry.BibEntry;
&nbsp;
&nbsp;import org.apache.pdfbox.pdmodel.PDDocument;
&nbsp;import org.apache.pdfbox.pdmodel.PDPage;
&nbsp;import org.apache.pdfbox.pdmodel.PDPageContentStream;
&nbsp;import org.apache.pdfbox.pdmodel.font.PDType1Font;
&nbsp;import org.apache.pdfbox.pdmodel.font.Standard14Fonts;
&nbsp;import org.slf4j.Logger;
&nbsp;import org.slf4j.LoggerFactory;
&nbsp;
&nbsp;public class XmpPdfExporter extends Exporter {
<b class="nc">&nbsp;    private static final Logger LOGGER = LoggerFactory.getLogger(XmpPdfExporter.class);</b>
&nbsp;
&nbsp;    private final XmpPreferences xmpPreferences;
&nbsp;
&nbsp;    public XmpPdfExporter(XmpPreferences xmpPreferences) {
<b class="nc">&nbsp;        super(&quot;pdf&quot;, Localization.lang(&quot;XMP-annotated PDF&quot;), StandardFileType.PDF);</b>
<b class="nc">&nbsp;        this.xmpPreferences = xmpPreferences;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void export(BibDatabaseContext databaseContext, Path pdfFile, List&lt;BibEntry&gt; entries) throws IOException, TransformerException {
<b class="nc">&nbsp;        Objects.requireNonNull(databaseContext);</b>
<b class="nc">&nbsp;        Objects.requireNonNull(pdfFile);</b>
<b class="nc">&nbsp;        Objects.requireNonNull(entries);</b>
&nbsp;
<b class="nc">&nbsp;        Path filePath = pdfFile.toAbsolutePath();</b>
&nbsp;
<b class="nc">&nbsp;        if (!Files.exists(filePath)) {</b>
<b class="nc">&nbsp;            try (PDDocument document = new PDDocument()) {</b>
<b class="nc">&nbsp;                PDPage page = new PDPage();</b>
<b class="nc">&nbsp;                document.addPage(page);</b>
&nbsp;
<b class="nc">&nbsp;                try (PDPageContentStream contentStream = new PDPageContentStream(document, page)) {</b>
<b class="nc">&nbsp;                    contentStream.beginText();</b>
<b class="nc">&nbsp;                    contentStream.newLineAtOffset(25, 500);</b>
<b class="nc">&nbsp;                    contentStream.setFont(new PDType1Font(Standard14Fonts.FontName.HELVETICA), 12);</b>
<b class="nc">&nbsp;                    contentStream.showText(&quot;This PDF was created by JabRef. It demonstrates the embedding of XMP data in PDF files. Please open the file metadata view of your PDF viewer to see the attached files. Note that the normal usage is to embed the BibTeX data in an existing PDF.&quot;);</b>
<b class="nc">&nbsp;                    contentStream.endText();</b>
&nbsp;                }
<b class="nc">&nbsp;                document.save(filePath.toString());</b>
&nbsp;            } catch (IOException e) {
<b class="nc">&nbsp;                LOGGER.error(&quot;Could not create PDF file&quot;, e);</b>
&nbsp;            }
<b class="nc">&nbsp;            new XmpUtilWriter(xmpPreferences).writeXmp(pdfFile, entries, databaseContext.getDatabase());</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-09-29 22:51</div>
</div>
</body>
</html>
