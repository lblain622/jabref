


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Author</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.jabref.model.entry</a>
</div>

<h1>Coverage Summary for Class: Author (org.jabref.model.entry)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Author</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/100)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/107)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.jabref.model.entry;
&nbsp;
&nbsp;import java.util.Objects;
&nbsp;import java.util.Optional;
&nbsp;
&nbsp;import org.jabref.architecture.AllowedToUseLogic;
&nbsp;import org.jabref.logic.formatter.bibtexfields.RemoveWordEnclosingAndOuterEnclosingBracesFormatter;
&nbsp;import org.jabref.model.strings.LatexToUnicodeAdapter;
&nbsp;import org.jabref.model.strings.StringUtil;
&nbsp;
&nbsp;/**
&nbsp; * This is an immutable class that keeps information regarding single author. It is just a container for the information, with very simple methods to access it.
&nbsp; * &lt;p&gt;
&nbsp; * Current usage: only methods &lt;code&gt;getLastOnly&lt;/code&gt;, &lt;code&gt;getFirstLast&lt;/code&gt;, and &lt;code&gt;getLastFirst&lt;/code&gt; are used; all other methods are provided for completeness.
&nbsp; */
&nbsp;@AllowedToUseLogic(&quot;because it needs to use formatter&quot;)
&nbsp;public class Author {
&nbsp;
&nbsp;    /**
&nbsp;     * Object indicating the &lt;code&gt;others&lt;/code&gt; author. This is a BibTeX feature mostly rendered in &quot;et al.&quot; in LaTeX.
&nbsp;     * Example: &lt;code&gt;authors = {Oliver Kopp and others}&lt;/code&gt;. This is then appearing as &quot;Oliver Kopp et al.&quot;.
&nbsp;     * In the context of BibTeX key generation, this is &quot;Kopp+&quot; (&lt;code&gt;+&lt;/code&gt; for &quot;et al.&quot;) and not &quot;KO&quot;.
&nbsp;     */
<b class="nc">&nbsp;    public static final Author OTHERS = new Author(&quot;&quot;, &quot;&quot;, null, &quot;others&quot;, null);</b>
&nbsp;
<b class="nc">&nbsp;    public static final RemoveWordEnclosingAndOuterEnclosingBracesFormatter FORMATTER = new RemoveWordEnclosingAndOuterEnclosingBracesFormatter();</b>
&nbsp;
&nbsp;    private final String givenName;
&nbsp;    private final String givenNameAbbreviated;
&nbsp;    private final String namePrefix;
&nbsp;    private final String familyName;
&nbsp;    private final String nameSuffix;
&nbsp;    private Author latexFreeAuthor;
&nbsp;
&nbsp;    /**
&nbsp;     * Creates the Author object. If any part of the name is absent, &lt;CODE&gt;null&lt;/CODE&gt; must be passed; otherwise other methods may return erroneous results.
&nbsp;     * &lt;p&gt;
&nbsp;     * In case only the last part is passed, enclosing braces are
&nbsp;     *
&nbsp;     * @param givenName            the first name of the author (may consist of several tokens, like &quot;Charles Louis Xavier Joseph&quot; in &quot;Charles Louis Xavier Joseph de la Vall{\&#39;e}e Poussin&quot;)
&nbsp;     * @param givenNameAbbreviated the abbreviated first name of the author (may consist of several tokens, like &quot;C. L. X. J.&quot; in &quot;Charles Louis Xavier Joseph de la Vall{\&#39;e}e Poussin&quot;). It is a responsibility of the caller to create a reasonable abbreviation of the first name.
&nbsp;     * @param namePrefix           the von part of the author&#39;s name (may consist of several tokens, like &quot;de la&quot; in &quot;Charles Louis Xavier Joseph de la Vall{\&#39;e}e Poussin&quot;)
&nbsp;     * @param familyName           the last name of the author (may consist of several tokens, like &quot;Vall{\&#39;e}e Poussin&quot; in &quot;Charles Louis Xavier Joseph de la Vall{\&#39;e}e Poussin&quot;)
&nbsp;     * @param nameSuffix           the junior part of the author&#39;s name (may consist of several tokens, like &quot;Jr. III&quot; in &quot;Smith, Jr. III, John&quot;)
&nbsp;     */
<b class="nc">&nbsp;    public Author(String givenName, String givenNameAbbreviated, String namePrefix, String familyName, String nameSuffix) {</b>
<b class="nc">&nbsp;        boolean keepBracesAtLastPart = StringUtil.isBlank(givenName) &amp;&amp; StringUtil.isBlank(givenNameAbbreviated) &amp;&amp; StringUtil.isBlank(namePrefix) &amp;&amp; !StringUtil.isBlank(familyName) &amp;&amp; StringUtil.isBlank(nameSuffix);</b>
&nbsp;
<b class="nc">&nbsp;        if (!StringUtil.isBlank(givenName)) {</b>
<b class="nc">&nbsp;            this.givenName = addDotIfAbbreviation(FORMATTER.format(givenName));</b>
&nbsp;        } else {
<b class="nc">&nbsp;            this.givenName = null;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!StringUtil.isBlank(givenNameAbbreviated)) {</b>
<b class="nc">&nbsp;            this.givenNameAbbreviated = FORMATTER.format(givenNameAbbreviated);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            this.givenNameAbbreviated = null;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!StringUtil.isBlank(namePrefix)) {</b>
<b class="nc">&nbsp;            this.namePrefix = FORMATTER.format(namePrefix);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            this.namePrefix = null;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (keepBracesAtLastPart) {</b>
&nbsp;            // We do not remove braces here to keep institutions protected
&nbsp;            // https://github.com/JabRef/jabref/issues/10031
<b class="nc">&nbsp;            this.familyName = familyName;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            if (!StringUtil.isBlank(familyName)) {</b>
<b class="nc">&nbsp;                this.familyName = FORMATTER.format(familyName);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                this.familyName = null;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (!StringUtil.isBlank(nameSuffix)) {</b>
<b class="nc">&nbsp;            this.nameSuffix = FORMATTER.format(nameSuffix);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            this.nameSuffix = null;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String addDotIfAbbreviation(String name) {
<b class="nc">&nbsp;        if ((name == null) || name.isEmpty()) {</b>
<b class="nc">&nbsp;            return name;</b>
&nbsp;        }
&nbsp;        // If only one character (uppercase letter), add a dot and return immediately:
<b class="nc">&nbsp;        if ((name.length() == 1) &amp;&amp; Character.isLetter(name.charAt(0)) &amp;&amp;</b>
<b class="nc">&nbsp;                Character.isUpperCase(name.charAt(0))) {</b>
<b class="nc">&nbsp;            return name + &quot;.&quot;;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        StringBuilder sb = new StringBuilder();</b>
<b class="nc">&nbsp;        char lastChar = name.charAt(0);</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; name.length(); i++) {</b>
<b class="nc">&nbsp;            if (i &gt; 0) {</b>
<b class="nc">&nbsp;                lastChar = name.charAt(i - 1);</b>
&nbsp;            }
<b class="nc">&nbsp;            char currentChar = name.charAt(i);</b>
<b class="nc">&nbsp;            sb.append(currentChar);</b>
&nbsp;
<b class="nc">&nbsp;            if (currentChar == &#39;.&#39;) {</b>
&nbsp;                // A.A. -&gt; A. A.
<b class="nc">&nbsp;                if (((i + 1) &lt; name.length()) &amp;&amp; Character.isUpperCase(name.charAt(i + 1))) {</b>
<b class="nc">&nbsp;                    sb.append(&#39; &#39;);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            boolean currentIsUppercaseLetter = Character.isLetter(currentChar) &amp;&amp; Character.isUpperCase(currentChar);</b>
<b class="nc">&nbsp;            if (!currentIsUppercaseLetter) {</b>
&nbsp;                // No uppercase letter, hence nothing to do
&nbsp;                continue;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            boolean lastIsLowercaseLetter = Character.isLetter(lastChar) &amp;&amp; Character.isLowerCase(lastChar);</b>
<b class="nc">&nbsp;            if (lastIsLowercaseLetter) {</b>
&nbsp;                // previous character was lowercase (probably an acronym like JabRef) -&gt; don&#39;t change anything
&nbsp;                continue;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if ((i + 1) &gt;= name.length()) {</b>
&nbsp;                // Current character is last character in input, so append dot
<b class="nc">&nbsp;                sb.append(&#39;.&#39;);</b>
&nbsp;                continue;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            char nextChar = name.charAt(i + 1);</b>
<b class="nc">&nbsp;            if (&#39;-&#39; == nextChar) {</b>
&nbsp;                // A-A -&gt; A.-A.
<b class="nc">&nbsp;                sb.append(&quot;.&quot;);</b>
&nbsp;                continue;
&nbsp;            }
<b class="nc">&nbsp;            if (&#39;.&#39; == nextChar) {</b>
&nbsp;                // Dot already there, so nothing to do
&nbsp;                continue;
&nbsp;            }
&nbsp;
&nbsp;            // AA -&gt; A. A.
&nbsp;            // Only append &quot;. &quot; if the rest of the &#39;word&#39; is uppercase
<b class="nc">&nbsp;            boolean nextWordIsUppercase = true;</b>
<b class="nc">&nbsp;            char furtherChar = Character.MIN_VALUE;</b>
<b class="nc">&nbsp;            for (int j = i + 1; j &lt; name.length(); j++) {</b>
<b class="nc">&nbsp;                furtherChar = name.charAt(j);</b>
<b class="nc">&nbsp;                if (Character.isWhitespace(furtherChar) || (furtherChar == &#39;-&#39;) || (furtherChar == &#39;~&#39;) || (furtherChar == &#39;.&#39;)) {</b>
&nbsp;                    // end of word
&nbsp;                    break;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                boolean furtherIsUppercaseLetter = Character.isLetter(furtherChar) &amp;&amp; Character.isUpperCase(furtherChar);</b>
<b class="nc">&nbsp;                if (!furtherIsUppercaseLetter) {</b>
<b class="nc">&nbsp;                    nextWordIsUppercase = false;</b>
&nbsp;                    break;
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (nextWordIsUppercase) {</b>
<b class="nc">&nbsp;                if (Character.isWhitespace(furtherChar)) {</b>
<b class="nc">&nbsp;                    sb.append(&quot;.&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    sb.append(&quot;. &quot;);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return sb.toString().trim();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int hashCode() {
<b class="nc">&nbsp;        return Objects.hash(givenNameAbbreviated, givenName, nameSuffix, familyName, namePrefix);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Compare this object with the given one.
&nbsp;     *
&nbsp;     * @return `true` iff the other object is an Author and all fields are `Objects.equals`.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean equals(Object other) {
<b class="nc">&nbsp;        if (this == other) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (other instanceof Author that) {</b>
<b class="nc">&nbsp;            return Objects.equals(givenName, that.givenName)</b>
<b class="nc">&nbsp;                    &amp;&amp; Objects.equals(givenNameAbbreviated, that.givenNameAbbreviated)</b>
<b class="nc">&nbsp;                    &amp;&amp; Objects.equals(namePrefix, that.namePrefix)</b>
<b class="nc">&nbsp;                    &amp;&amp; Objects.equals(familyName, that.familyName)</b>
<b class="nc">&nbsp;                    &amp;&amp; Objects.equals(nameSuffix, that.nameSuffix);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the first name of the author stored in this object (&quot;First&quot;).
&nbsp;     *
&nbsp;     * @return first name of the author (may consist of several tokens)
&nbsp;     */
&nbsp;    public Optional&lt;String&gt; getGivenName() {
<b class="nc">&nbsp;        return Optional.ofNullable(givenName);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the abbreviated first name of the author stored in this object (&quot;F.&quot;).
&nbsp;     *
&nbsp;     * @return abbreviated first name of the author (may consist of several tokens)
&nbsp;     */
&nbsp;    public Optional&lt;String&gt; getGivenNameAbbreviated() {
<b class="nc">&nbsp;        return Optional.ofNullable(givenNameAbbreviated);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the von part of the author&#39;s name stored in this object (&quot;von&quot;, &quot;name prefix&quot;).
&nbsp;     *
&nbsp;     * @return von part of the author&#39;s name (may consist of several tokens)
&nbsp;     */
&nbsp;    public Optional&lt;String&gt; getNamePrefix() {
<b class="nc">&nbsp;        return Optional.ofNullable(namePrefix);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the last name of the author stored in this object (&quot;Last&quot;).
&nbsp;     *
&nbsp;     * @return last name of the author (may consist of several tokens)
&nbsp;     */
&nbsp;    public Optional&lt;String&gt; getFamilyName() {
<b class="nc">&nbsp;        return Optional.ofNullable(familyName);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the name suffix (&quot;junior&quot;) part of the author&#39;s name stored in this object (&quot;Jr&quot;).
&nbsp;     *
&nbsp;     * @return junior part of the author&#39;s name (may consist of several tokens) or null if the author does not have a Jr. Part
&nbsp;     */
&nbsp;    public Optional&lt;String&gt; getNameSuffix() {
<b class="nc">&nbsp;        return Optional.ofNullable(nameSuffix);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns von-part followed by last name (&quot;von Last&quot;). If both fields were specified as &lt;CODE&gt;null&lt;/CODE&gt;, the empty string &lt;CODE&gt;&quot;&quot;&lt;/CODE&gt; is returned.
&nbsp;     *
&nbsp;     * @return &#39;von Last&#39;
&nbsp;     */
&nbsp;    public String getNamePrefixAndFamilyName() {
<b class="nc">&nbsp;        if (namePrefix == null || namePrefix.isEmpty()) {</b>
<b class="nc">&nbsp;            return getFamilyName().orElse(&quot;&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return familyName == null ? namePrefix : namePrefix + &#39; &#39; + familyName;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the author&#39;s name in form &#39;von Last, Jr., First&#39; with the first name full or abbreviated depending on parameter.
&nbsp;     *
&nbsp;     * @param abbr &lt;CODE&gt;true&lt;/CODE&gt; - abbreviate first name, &lt;CODE&gt;false&lt;/CODE&gt; - do not abbreviate
&nbsp;     * @return &#39;von Last, Jr., First&#39; (if &lt;CODE&gt;abbr==false&lt;/CODE&gt;) or &#39;von Last, Jr., F.&#39; (if &lt;CODE&gt;abbr==true&lt;/CODE&gt;)
&nbsp;     */
&nbsp;    public String getFamilyGiven(boolean abbr) {
<b class="nc">&nbsp;        StringBuilder res = new StringBuilder(getNamePrefixAndFamilyName());</b>
<b class="nc">&nbsp;        getNameSuffix().ifPresent(jr -&gt; res.append(&quot;, &quot;).append(jr));</b>
<b class="nc">&nbsp;        if (abbr) {</b>
<b class="nc">&nbsp;            getGivenNameAbbreviated().ifPresent(firstA -&gt; res.append(&quot;, &quot;).append(firstA));</b>
&nbsp;        } else {
<b class="nc">&nbsp;            getGivenName().ifPresent(first -&gt; res.append(&quot;, &quot;).append(first));</b>
&nbsp;        }
<b class="nc">&nbsp;        return res.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the author&#39;s name in form &#39;First von Last, Jr.&#39; with the first name full or abbreviated depending on parameter.
&nbsp;     *
&nbsp;     * @param abbr &lt;CODE&gt;true&lt;/CODE&gt; - abbreviate first name, &lt;CODE&gt;false&lt;/CODE&gt; - do not abbreviate
&nbsp;     * @return &#39;First von Last, Jr.&#39; (if &lt;CODE&gt;abbr==false&lt;/CODE&gt;) or &#39;F. von Last, Jr.&#39; (if &lt;CODE&gt;abbr==true&lt;/CODE&gt;)
&nbsp;     */
&nbsp;    public String getGivenFamily(boolean abbr) {
<b class="nc">&nbsp;        StringBuilder res = new StringBuilder();</b>
<b class="nc">&nbsp;        if (abbr) {</b>
<b class="nc">&nbsp;            getGivenNameAbbreviated().map(firstA -&gt; firstA + &#39; &#39;).ifPresent(res::append);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            getGivenName().map(first -&gt; first + &#39; &#39;).ifPresent(res::append);</b>
&nbsp;        }
<b class="nc">&nbsp;        res.append(getNamePrefixAndFamilyName());</b>
<b class="nc">&nbsp;        getNameSuffix().ifPresent(jr -&gt; res.append(&quot;, &quot;).append(jr));</b>
<b class="nc">&nbsp;        return res.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public String toString() {
<b class="nc">&nbsp;        return &quot;Author{&quot; + &quot;givenName=&#39;&quot; + givenName + &#39;\&#39;&#39; +</b>
&nbsp;                &quot;, givenNameAbbreviated=&#39;&quot; + givenNameAbbreviated + &#39;\&#39;&#39; +
&nbsp;                &quot;, namePrefix=&#39;&quot; + namePrefix + &#39;\&#39;&#39; +
&nbsp;                &quot;, familyName=&#39;&quot; + familyName + &#39;\&#39;&#39; +
&nbsp;                &quot;, nameSuffix=&#39;&quot; + nameSuffix + &#39;\&#39;&#39; +
&nbsp;                &#39;}&#39;;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the name as &quot;Last, Jr, F.&quot; omitting the von-part and removing starting braces.
&nbsp;     *
&nbsp;     * @return &quot;Last, Jr, F.&quot; as described above or &quot;&quot; if all these parts are empty.
&nbsp;     */
&nbsp;    public String getNameForAlphabetization() {
<b class="nc">&nbsp;        StringBuilder res = new StringBuilder();</b>
<b class="nc">&nbsp;        getFamilyName().ifPresent(res::append);</b>
<b class="nc">&nbsp;        getNameSuffix().ifPresent(jr -&gt; res.append(&quot;, &quot;).append(jr));</b>
<b class="nc">&nbsp;        getGivenNameAbbreviated().ifPresent(firstA -&gt; res.append(&quot;, &quot;).append(firstA));</b>
<b class="nc">&nbsp;        while ((!res.isEmpty()) &amp;&amp; (res.charAt(0) == &#39;{&#39;)) {</b>
<b class="nc">&nbsp;            res.deleteCharAt(0);</b>
&nbsp;        }
<b class="nc">&nbsp;        return res.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns a LaTeX-free version of this `Author`.
&nbsp;     */
&nbsp;    public Author latexFree() {
<b class="nc">&nbsp;        if (latexFreeAuthor == null) {</b>
<b class="nc">&nbsp;            String first = getGivenName().map(LatexToUnicodeAdapter::format).orElse(null);</b>
<b class="nc">&nbsp;            String givenNameAbbreviated = getGivenNameAbbreviated().map(LatexToUnicodeAdapter::format).orElse(null);</b>
<b class="nc">&nbsp;            String von = getNamePrefix().map(LatexToUnicodeAdapter::format).orElse(null);</b>
<b class="nc">&nbsp;            String last = getFamilyName().map(LatexToUnicodeAdapter::format).orElse(null);</b>
<b class="nc">&nbsp;            String jr = getNameSuffix().map(LatexToUnicodeAdapter::format).orElse(null);</b>
<b class="nc">&nbsp;            latexFreeAuthor = new Author(first, givenNameAbbreviated, von, last, jr);</b>
<b class="nc">&nbsp;            latexFreeAuthor.latexFreeAuthor = latexFreeAuthor;</b>
&nbsp;        }
<b class="nc">&nbsp;        return latexFreeAuthor;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-09-29 22:51</div>
</div>
</body>
</html>
